apply plugin: 'java'
apply plugin: 'artifactory'
apply plugin: 'maven'

dependencies {
    compile gradleApi()
}
ext {
    sharedDir = file("${project.rootDir}/../shared")
}

buildscript { // artifacrory plugin
    repositories {
        maven { url 'http://arti.exactpro.com/libs-release' }
    }
    dependencies {
        classpath(group: 'org.jfrog.buildinfo', name: 'build-info-extractor-gradle', version: '2.2.+')
        classpath(group: 'com.bmuschko', name: 'gradle-tomcat-plugin', version: '2.2.2')
    }
}

repositories {
    maven {
        name 'MavenLocal' // for local builds only
        url sharedDir
    }
    maven {
        name 'Artifactory'
        url 'http://arti.exactpro.com/libs-snapshot'
    }
}

group = 'com.exactprosystems.testtools'
version = '1.0.0'

uploadArchives {
    repositories.mavenDeployer {
        uniqueVersion = false // publish non unique snapshots to local repository
        repository(url: "file://${sharedDir}")
    }
    doFirst { sharedDir.mkdirs() }
}
